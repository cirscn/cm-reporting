# 国际化（i18n）架构说明

## 目标
- 所有用户可见文案与枚举显示值可切换语言
- 文案与规则/校验解耦，避免硬编码
- 模板/版本差异与语言差异分离管理

## 事实来源
- PRD 与 Excel 文案（以英文为基线，中文为辅助）
- 原型 HTML 仅作对齐参考，不作为最终文案来源

## 方案原则
- **文案外置**：UI 组件不得内嵌模板/语言文案
- **显示值/内部值分离**：枚举项显示值由 i18n 管理，内部值稳定
- **规则提示统一出口**：checker message 统一由 i18n key 映射

## 选型结论
- 默认采用 **react-i18next + i18next**（生态成熟、按命名空间拆分、运行期切换语言稳定）。\n
## 库落地结构
- `core/i18n/index.ts`：i18next 初始化与实例导出\n
- `core/i18n/locales/`：语言包\n
  - `en-US.json`\n
  - `zh-CN.json`\n
- `core/i18n/namespaces/`：按域拆分 key（company/questions/lists/checker/common）\n
- `ui/i18n/`：UI 层的 hook 与 helper（`useT()`、`tOption()`）\n

## 目录建议
- `core/i18n/`
  - `locales/`：语言包（`en-US.json`、`zh-CN.json`）
  - `keys/`：按域拆分 key（company、questions、lists、checker）
  - `format/`：格式化与参数插值

## 关键接口（示意）
```ts
export type Locale = "en-US" | "zh-CN";

export interface I18nProvider {
  locale: Locale;
  t: (key: string, params?: Record<string, string | number>) => string;
}

export interface LabelMap {
  labelKey: string;
  helpKey?: string;
}
```

## React 集成（示意）
```ts
import { useTranslation } from "react-i18next";

export const useT = () => {
  const { t, i18n } = useTranslation();
  return { t, locale: i18n.language as Locale };
};
```

## 文案归属规则
- **字段 label**：`fields.*` 统一前缀
- **题干/选项**：`questions.*` 与 `options.*`
- **表头**：`tables.*`
- **校验信息**：`checker.*`

## 与 registry 的关系
- registry 只存 **key**，不存具体文案
- 多版本差异由 key 切换实现（例如 `questions.emrt.v1.q3`）

## 风险控制
- 若中英文文本冲突，以英文为“事实值”，中文为“显示层”
- 变更需同步更新 key 与语言包，避免 UI 出现缺失文案
